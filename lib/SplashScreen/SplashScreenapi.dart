import 'dart:async';

import 'package:animated_splash_screen/animated_splash_screen.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:localstorage/localstorage.dart';
import 'package:star_event/Admin/AdminHomePage.dart';
import 'package:star_event/StarHomePage/StarHome.dart';
import 'package:star_event/User/HomePage/Homepage.dart';
import 'package:star_event/User/Login/Login.dart';

class SplashScreenApi extends StatefulWidget {
  @override
  _SplashScreenApiState createState() => _SplashScreenApiState();
}

class _SplashScreenApiState extends State<SplashScreenApi> {
  final LocalStorage storage = new LocalStorage('Star');
  var timer;
  @override
  void initState() {
    super.initState();
    checkLogin();
  }

  void checkLogin() async {
    await storage.ready;
    timer = Timer.periodic(new Duration(seconds: 2), (timer) {
      processLogin();
    });
  }

  void processLogin() async {
    timer.cancel();
    // if (storage.getItem("user") == null) {
    //   Navigator.of(context).pushReplacement(MaterialPageRoute(
    //       builder: (BuildContext context) => IntroductionScreen()));
    //   // );
    // } else {
    //   //first call verify auth token api and check if it's valid //  success response code = 202 / failed = 401 = login
    //   Navigator.of(context).pushReplacement(
    //       MaterialPageRoute(builder: (BuildContext context) => Homepage()));
    // }
    if (storage.getItem("Type") == "UserLogin") {
      Navigator.of(context).pushReplacement(
          MaterialPageRoute(builder: (BuildContext context) => Homepage(0)));
    } else if (storage.getItem("Type") == "AdminLogin") {
      Navigator.of(context).pushReplacement(MaterialPageRoute(
          builder: (BuildContext context) => AdminHomepage(0)));
    } else if (storage.getItem("Type") == "StarLogin") {
      Navigator.of(context).pushReplacement(MaterialPageRoute(
          builder: (BuildContext context) => StarHomepage(0)));
    } else {
      Navigator.of(context).pushReplacement(
          MaterialPageRoute(builder: (BuildContext context) => UserLogin()));
    }
    // if (status) {
    //   Navigator.of(context).pushReplacement(
    //       MaterialPageRoute(builder: (BuildContext context) => Homepage()));
    // } else {
    //   Navigator.of(context).pushReplacement(MaterialPageRoute(
    //       builder: (BuildContext context) => LoginScreenEmail()));
    // }
  }

  Widget build(BuildContext context) {
    return Scaffold(
        backgroundColor: const Color(0xffffffff),
        body: Stack(
          children: [
            AnimatedSplashScreen(
                duration: 3000,
                splash: SvgPicture.asset(
                  "assets/images/5howApp.svg",
                ),
                nextScreen: Homepage(0),
                splashTransition: SplashTransition.scaleTransition,
                backgroundColor: Colors.white),
            Padding(
              padding: const EdgeInsets.only(top: 90),
              child: Center(
                child: Text(
                  "5HowApp",
                  style: TextStyle(fontSize: 15),
                ),
              ),
            )
          ],
        ));
  }
}

const String _svg_pkpasw =
    '<svg viewBox="163.5 386.3 62.9 40.4" ><path transform="translate(-830.85, -1237.77)" d="M 1057.318481445312 1624.069580078125 L 1057.318481445312 1663.041015625 C 1056.861450195312 1664.16064453125 1056.003173828125 1664.506591796875 1054.833251953125 1664.50537109375 C 1035.492797851562 1664.4873046875 1016.152099609375 1664.492919921875 996.8117065429688 1664.492431640625 C 995.0300903320312 1664.492431640625 994.37451171875 1663.83154296875 994.37451171875 1662.039794921875 C 994.374267578125 1649.64453125 994.37451171875 1637.24951171875 994.37451171875 1624.854248046875 C 994.37451171875 1624.616455078125 994.37451171875 1624.37890625 994.37451171875 1624.08984375 L 995.2413940429688 1624.08984375 C 1015.647277832031 1624.08984375 1036.053466796875 1624.09033203125 1056.459350585938 1624.08935546875 C 1056.745727539062 1624.08935546875 1057.031982421875 1624.076416015625 1057.318481445312 1624.069580078125 Z M 1015.74169921875 1656.139892578125 L 1015.754638671875 1656.140869140625 C 1015.749694824219 1656.222412109375 1015.745544433594 1656.304443359375 1015.739868164062 1656.38623046875 C 1015.595458984375 1658.432861328125 1016.764831542969 1659.312255859375 1018.704772949219 1658.610107421875 C 1020.896545410156 1657.81640625 1023.090148925781 1657.027099609375 1025.273193359375 1656.20947265625 C 1025.687622070312 1656.05419921875 1026.033935546875 1656.068603515625 1026.443115234375 1656.220947265625 C 1028.72265625 1657.0712890625 1031.00732421875 1657.91015625 1033.302001953125 1658.71923828125 C 1034.846435546875 1659.263671875 1036.08740234375 1658.29541015625 1035.9765625 1656.666748046875 C 1035.810180664062 1654.215087890625 1035.621459960938 1651.7646484375 1035.482421875 1649.311279296875 C 1035.464111328125 1648.98974609375 1035.601928710938 1648.587890625 1035.806884765625 1648.336669921875 C 1037.372680664062 1646.415771484375 1038.978759765625 1644.5283203125 1040.559814453125 1642.619873046875 C 1041.20556640625 1641.840576171875 1041.314819335938 1640.94873046875 1040.752563476562 1640.260009765625 C 1040.450439453125 1639.89013671875 1039.978637695312 1639.57861328125 1039.521728515625 1639.42822265625 C 1037.191650390625 1638.66064453125 1034.845092773438 1637.941650390625 1032.495483398438 1637.23583984375 C 1031.996826171875 1637.0859375 1031.645385742188 1636.847900390625 1031.355590820312 1636.40478515625 C 1030.134399414062 1634.53759765625 1028.87890625 1632.6923828125 1027.631103515625 1630.84228515625 C 1026.574584960938 1629.276123046875 1025.108032226562 1629.2841796875 1024.044311523438 1630.86279296875 C 1022.786010742188 1632.730224609375 1021.549743652344 1634.61328125 1020.263427734375 1636.461181640625 C 1020.041442871094 1636.780029296875 1019.652770996094 1637.065185546875 1019.282287597656 1637.185302734375 C 1016.949401855469 1637.9443359375 1014.597351074219 1638.64501953125 1012.256530761719 1639.37939453125 C 1010.497009277344 1639.931640625 1010.081359863281 1641.363037109375 1011.263732910156 1642.7841796875 C 1012.79638671875 1644.62646484375 1014.328796386719 1646.46875 1015.886352539062 1648.2900390625 C 1016.18115234375 1648.635009765625 1016.262573242188 1648.966064453125 1016.228637695312 1649.39990234375 C 1016.052856445312 1651.6455078125 1015.901550292969 1653.89306640625 1015.74169921875 1656.139892578125 Z" fill="#fe7607" fill-opacity="0.92" stroke="none" stroke-width="1" stroke-miterlimit="10" stroke-linecap="butt" /></svg>';
const String _svg_2et7ac =
    '<svg viewBox="163.5 372.7 62.9 9.8" ><path transform="translate(-830.84, -1198.97)" d="M 1057.313598632812 1581.458251953125 C 1057.069458007812 1581.47265625 1056.8251953125 1581.498779296875 1056.580810546875 1581.4990234375 C 1036.115478515625 1581.5009765625 1015.64990234375 1581.50048828125 995.184326171875 1581.50048828125 L 994.4140014648438 1581.50048828125 C 994.397216796875 1581.306640625 994.3714599609375 1581.149169921875 994.3714599609375 1580.99169921875 C 994.368896484375 1578.594970703125 994.36474609375 1576.1982421875 994.3714599609375 1573.801025390625 C 994.3751220703125 1572.4794921875 995.0985717773438 1571.715576171875 996.4058837890625 1571.710693359375 C 1000.31884765625 1571.69580078125 1004.231506347656 1571.704345703125 1008.14453125 1571.706298828125 C 1008.282409667969 1571.706298828125 1008.420288085938 1571.734130859375 1008.619567871094 1571.755615234375 C 1008.619567871094 1572.533203125 1008.613037109375 1573.285888671875 1008.621032714844 1574.0380859375 C 1008.633972167969 1575.239501953125 1009.369323730469 1576.046875 1010.458129882812 1576.068115234375 C 1011.576416015625 1576.08984375 1012.371215820312 1575.290771484375 1012.407958984375 1574.073486328125 C 1012.430786132812 1573.318603515625 1012.412109375 1572.562255859375 1012.412109375 1571.755615234375 L 1039.271240234375 1571.755615234375 C 1039.271240234375 1572.543701171875 1039.25146484375 1573.316650390625 1039.27587890625 1574.088134765625 C 1039.312744140625 1575.251953125 1040.064453125 1576.0439453125 1041.116821289062 1576.068359375 C 1042.177490234375 1576.0927734375 1043.002685546875 1575.333740234375 1043.055419921875 1574.26953125 C 1043.075317382812 1573.860595703125 1043.062866210938 1573.4501953125 1043.063842773438 1573.04052734375 C 1043.06494140625 1572.633056640625 1043.064086914062 1572.225341796875 1043.064086914062 1571.742919921875 C 1043.330444335938 1571.728759765625 1043.564697265625 1571.7060546875 1043.799194335938 1571.705810546875 C 1047.466064453125 1571.703369140625 1051.133544921875 1571.732666015625 1054.800170898438 1571.6875 C 1055.96435546875 1571.673095703125 1056.832153320312 1571.991455078125 1057.313598632812 1573.0986328125 L 1057.313598632812 1581.458251953125 Z" fill="#fe7607" fill-opacity="0.92" stroke="none" stroke-width="1" stroke-miterlimit="10" stroke-linecap="butt" /></svg>';
const String _svg_ci8unj =
    '<svg viewBox="184.9 397.2 20.1 19.2" ><path transform="translate(-892.02, -1268.95)" d="M 1080.859619140625 1685.398681640625 C 1080.9736328125 1683.74462890625 1081.022827148438 1682.187744140625 1081.204956054688 1680.646728515625 C 1081.35888671875 1679.34765625 1081.143188476562 1678.272705078125 1080.194702148438 1677.282958984375 C 1079.06591796875 1676.104736328125 1078.077758789062 1674.791015625 1076.968994140625 1673.464599609375 C 1077.219116210938 1673.37158203125 1077.413452148438 1673.288818359375 1077.613891601562 1673.226806640625 C 1079.233642578125 1672.722900390625 1080.85107421875 1672.2119140625 1082.4765625 1671.7275390625 C 1083.1767578125 1671.518798828125 1083.703491210938 1671.131591796875 1084.10595703125 1670.516845703125 C 1085.043579101562 1669.08349609375 1086.0126953125 1667.67041015625 1087.025024414062 1666.166015625 C 1087.638916015625 1667.077880859375 1088.197509765625 1667.924072265625 1088.772827148438 1668.75927734375 C 1090.941040039062 1671.907470703125 1089.925048828125 1671.17041015625 1093.601928710938 1672.346435546875 C 1094.727783203125 1672.70654296875 1095.858154296875 1673.052734375 1097.053588867188 1673.42626953125 C 1096.936645507812 1673.595703125 1096.860717773438 1673.726806640625 1096.765014648438 1673.841796875 C 1095.663330078125 1675.161865234375 1094.5703125 1676.489501953125 1093.449096679688 1677.793212890625 C 1092.967163085938 1678.353515625 1092.733032226562 1678.95556640625 1092.794555664062 1679.700927734375 C 1092.920654296875 1681.230712890625 1093.013305664062 1682.76318359375 1093.1171875 1684.294677734375 C 1093.140625 1684.63671875 1093.154663085938 1684.9794921875 1093.176879882812 1685.39208984375 C 1091.480224609375 1684.776123046875 1089.841186523438 1684.208740234375 1088.224731445312 1683.583251953125 C 1087.414428710938 1683.269775390625 1086.65966796875 1683.261474609375 1085.848876953125 1683.57373046875 C 1084.230346679688 1684.19677734375 1082.59228515625 1684.7685546875 1080.859619140625 1685.398681640625 Z" fill="#fe7607" fill-opacity="0.92" stroke="none" stroke-width="1" stroke-miterlimit="10" stroke-linecap="butt" /></svg>';
const String _svg_k0aa1y =
    '<svg viewBox="177.8 364.5 3.8 4.4" ><path transform="translate(-871.57, -1175.62)" d="M 1053.13671875 1544.533569335938 L 1049.372802734375 1544.533569335938 C 1049.372802734375 1543.566528320312 1049.308349609375 1542.6259765625 1049.391479492188 1541.698852539062 C 1049.46923828125 1540.83251953125 1050.324340820312 1540.180786132812 1051.202270507812 1540.166137695312 C 1052.092163085938 1540.1513671875 1052.867553710938 1540.763061523438 1053.06494140625 1541.642578125 C 1053.1005859375 1541.801513671875 1053.132080078125 1541.96533203125 1053.133544921875 1542.127319335938 C 1053.140502929688 1542.903198242188 1053.13671875 1543.67919921875 1053.13671875 1544.533569335938 Z" fill="#fe7607" fill-opacity="0.92" stroke="none" stroke-width="1" stroke-miterlimit="10" stroke-linecap="butt" /></svg>';
const String _svg_noboxh =
    '<svg viewBox="208.4 364.5 3.8 4.4" ><path transform="translate(-959.15, -1175.62)" d="M 1167.624267578125 1544.5205078125 C 1167.624267578125 1543.58642578125 1167.557250976562 1542.685302734375 1167.641845703125 1541.798828125 C 1167.738403320312 1540.784423828125 1168.628662109375 1540.106201171875 1169.60595703125 1540.16796875 C 1170.584350585938 1540.229736328125 1171.340576171875 1541.01123046875 1171.370483398438 1542.026123046875 C 1171.391967773438 1542.761962890625 1171.377197265625 1543.499267578125 1171.375854492188 1544.2353515625 C 1171.375854492188 1544.31591796875 1171.35791015625 1544.396484375 1171.343139648438 1544.5205078125 L 1167.624267578125 1544.5205078125 Z" fill="#fe7607" fill-opacity="0.92" stroke="none" stroke-width="1" stroke-miterlimit="10" stroke-linecap="butt" /></svg>';
